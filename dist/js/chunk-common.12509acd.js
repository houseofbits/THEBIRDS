(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-common"],{0:function(t,e){},"0cf1":function(t,e,i){},1:function(t,e,i){t.exports=i("56d7")},2553:function(t,e,i){"use strict";var n=i("4ad9"),s=i.n(n);s.a},"396b":function(t,e,i){},"3f22":function(t,e,i){},"4ad9":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);var n=i("2b0e"),s=i("28dd"),o=(i("1e5c"),i("589d"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{ref:"mainScreen",staticClass:"main-screen"},[i("div",{ref:"mainBackground",staticClass:"main-background",style:{backgroundImage:"url("+t.backgroundImageUrl+")"}},[i("div",{ref:"shadowBackground",staticClass:"shadow-background",style:{backgroundImage:"url("+t.shadowImageUrl+")"}})]),t._l(t.sectors,(function(t,e){return i("sector",{key:e,attrs:{sector:t}})}))],2),i("div",{staticClass:"clip-screen"},[t.divisions&&!t.selectedDivision?i("svg",t._l(t.sectors,(function(t,e){return i("divisionregion",{key:e,attrs:{sector:t}})})),1):t._e(),i("svg",t._l(t.sectors,(function(t,e){return i("clipregion",{key:e,attrs:{sector:t}})})),1)]),i("div",{ref:"detailScreen",staticClass:"detail-screen"},[i("div",{staticClass:"detail-3d"},[i("div",{ref:"detailCarousel",staticClass:"detail-frame"},t._l(t.sectors,(function(e,n){return t.renderDetailView(n)?i("detail",{key:n,attrs:{sector:e}}):t._e()})),1)]),i("div",{staticClass:"navigation"},[null!=t.getPreviousDetailViewId()?i("div",{staticClass:"button-prev",on:{click:t.movePrev}}):t._e(),null!=t.getNextDetailViewId()?i("div",{staticClass:"button-next",on:{click:t.moveNext}}):t._e(),i("div",{staticClass:"button-exit",on:{click:t.closeDetailView}}),i("div",{staticClass:"language"},[i("div",{staticClass:"flag ru",class:{active:"ru"==t.getLanguage()},on:{click:function(e){return t.setLanguage("ru")}}}),i("div",{staticClass:"flag en",class:{active:"en"==t.getLanguage()},on:{click:function(e){return t.setLanguage("en")}}}),i("div",{staticClass:"flag lv",class:{active:"lv"==t.getLanguage()},on:{click:function(e){return t.setLanguage("lv")}}})])])])])}),a=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sector",style:{backgroundImage:"url("+t.backgroundImageUrl+")"}},[t.backgroundImageActiveUrl?i("div",{staticClass:"active",style:{backgroundImage:"url("+t.backgroundImageActiveUrl+")"}}):t._e()])},u=[];class l{constructor(t){if(this.height=0,this.width=0,t&&t.indexOf(",")>0){var e=t.split(",");"undefined"!=typeof e[0]&&(this.width=parseFloat(e[0])),"undefined"!=typeof e[1]&&(this.height=parseFloat(e[1]))}}}class c{constructor(t){if(this.x=0,this.y=0,t&&t.indexOf(",")>0){var e=t.split(",");"undefined"!=typeof e[0]&&(this.x=parseFloat(e[0])),"undefined"!=typeof e[1]&&(this.y=parseFloat(e[1]))}}}class d{constructor(t){if(this.x=0,this.y=0,this.z=0,t&&t.indexOf(",")>0){var e=t.split(",");"undefined"!=typeof e[0]&&(this.x=parseFloat(e[0])),"undefined"!=typeof e[1]&&(this.y=parseFloat(e[1])),"undefined"!=typeof e[2]&&(this.z=parseFloat(e[2]))}}}function h(t,e){return Math.random()*(e-t)+t}function f(t){var e=Math.PI;return t*(180/e)}var p={props:["sector"],data:function(){return{data:this.sector}},computed:{backgroundImageUrl:function(){return this.getImageProp("image")},backgroundImageActiveUrl:function(){return this.getImageProp("imageActive")},width:function(){var t=new l(this.getImageProp("size"));return t.width},height:function(){var t=new l(this.getImageProp("size"));return t.height},polygonPoints:function(){return this.getImageProp("clipPolygon")},position:function(){return new d(this.getImageProp("position"))}},methods:{getImageProp:function(t){return this.data&&"undefined"!=typeof this.data.mainImage&&"undefined"!=typeof this.data.mainImage[t]?this.data.mainImage[t]:""},blurEffect:function(t){Velocity(this.$el,"finish");var e=0;t&&(e=5),Velocity(this.$el,{blur:e},500)},onBlurEffectOn:function(t){t!=this.$vnode.key?this.blurEffect(!0):this.blurEffect(!1)},onBlurEffectOff:function(){this.blurEffect(!1)},onMoveOut:function(t){var e=this,i=h(0,300),n=this.getImageProp("maxBlur");t==this.$vnode.key&&(i=0),Velocity(this.$el,{translateZ:e.position.z+800,blur:n},{delay:i,duration:600})},onMoveIn:function(){var t=this,e=h(0,300);Velocity(this.$el,{translateZ:t.position.z,blur:4},{delay:e,duration:400}),Velocity(this.$el,{blur:0},100)},onShake:function(t){if(t==this.$vnode.key){var e=this,i=0,n=h(0,50);Velocity(this.$el,{translateZ:e.position.z+n,rotateY:i},{duration:300,easing:"swing",complete:function(t){Velocity(e.$el,{translateZ:e.position.z,rotateX:0,rotateY:0},200)}})}}},mounted:function(){this.$parent.$on("blur-effect-event",this.blurEffect),this.$parent.$on("blur-effect-on",this.onBlurEffectOn),this.$parent.$on("blur-effect-off",this.onBlurEffectOff),this.$parent.$on("move-out",this.onMoveOut),this.$parent.$on("move-in",this.onMoveIn),this.$parent.$on("shake",this.onShake);var t=new d(this.getImageProp("position")),e=new d(this.getImageProp("rotation")),i=new l(this.getImageProp("size"));Velocity(this.$el,{translateX:t.x,translateY:t.y,translateZ:t.z,rotateX:e.x,rotateY:e.y,rotateZ:e.z,width:i.width,height:i.height},0)}},g=p,v=(i("2553"),i("2877")),m=Object(v["a"])(g,r,u,!1,null,"89dd5714",null),y=m.exports,$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.polygonPoints?i("polygon",{staticClass:"polygon",attrs:{points:t.polygonPoints},on:{mousedown:t.onGrab,mouseup:t.onRelease,mouseover:t.onGrab,mouseleave:t.onLeave,touchstart:t.onGrab,touchend:t.onRelease}}):t._e()},w=[],b={props:["sector"],data:function(){return{data:this.sector}},computed:{polygonPoints:function(){return!(!this.data||"undefined"==typeof this.data.mainImage||"undefined"==typeof this.data.mainImage["clipPolygon"])&&this.data.mainImage["clipPolygon"]}},methods:{onGrab:function(){this.$parent.$emit("sector-grab",this.$vnode.key)},onRelease(){this.$parent.$emit("sector-release",this.$vnode.key)},onLeave(){this.$parent.$emit("sector-leave",this.$vnode.key)}}},k=b,I=(i("67e6"),Object(v["a"])(k,$,w,!1,null,"2be0b71c",null)),D=I.exports,P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"detail-element",style:{backgroundImage:"url("+t.detailBackgroundImageUrl+")"}},[i("div",{staticClass:"detail-content"},[i("div",{staticClass:"image",style:{width:t.imageSize.width+"px",height:t.imageSize.height+"px",top:t.imagePosition.y+"px",left:t.imagePosition.x+"px",backgroundImage:"url("+t.imageUrl+")"}}),i("div",{staticClass:"title"},[i("span",[t._v(t._s(t.title))])]),i("div",{staticClass:"title-latin"},[i("span",[t._v(t._s(t.titleLatin))])]),i("div",{staticClass:"description",style:{left:t.descriptionPosition.x+"px",top:t.descriptionPosition.y+"px"}},[i("span",[t._v(t._s(t.description))])]),i("div",{staticClass:"sounds"},t._l(t.sounds,(function(e,n){return i("div",{key:n,class:{playing:t.isPlaying(n)},on:{click:function(e){return t.playSound(n)}}},[i("span",{staticClass:"icon"}),i("span",{staticClass:"title"},[t._v(t._s(t.soundTitle(n)))]),t._m(0,!0)])})),0)])])},V=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"waveform"},[i("div"),i("div"),i("div"),i("div")])}],x={props:["sector"],template:"#detail-template",data:function(){return{data:this.sector}},computed:{sounds:function(){return"undefined"!=typeof this.data.audio?this.data.audio:null},descriptionPosition:function(){if("undefined"!=typeof this.data.description){var t=this.$parent.getLanguage();if("object"==typeof this.data.description[t]&&"undefined"!=typeof this.data.description[t].position){var e=new c(this.data.description[t].position);return e}if("undefined"!=typeof this.data.description.position){e=new c(this.data.description.position);return e}}return new c(null)},detailBackgroundImageUrl:function(){return this.$parent.detailBackgroundImageUrl},title:function(){var t=this.$parent.getLanguage();return"undefined"!=typeof this.data.title&&"undefined"!=typeof this.data.title[t]?this.data.title[t]:"No title ["+this.$vnode.key+"]"},titleLatin:function(){return"undefined"!=typeof this.data.titleLatin?this.data.titleLatin:""},description:function(){var t=this.$parent.getLanguage();return"undefined"!=typeof this.data.description&&"undefined"!=typeof this.data.description[t]?"object"==typeof this.data.description[t]&&"undefined"!=typeof this.data.description[t].text?this.data.description[t].text:this.data.description[t]:""},imageUrl:function(){return this.getDetailProp("image")},imageSize:function(){return new l(this.getDetailProp("size"))},imagePosition:function(){return new c(this.getDetailProp("position"))}},methods:{soundTitle:function(t){var e=this.$parent.getLanguage();return"undefined"!=this.sounds[t]&&"undefined"!=this.sounds[t].title&&"undefined"!=this.sounds[t].title[e]?this.sounds[t].title[e]:""},playSound:function(t){var e=this.isPlaying(t);this.$parent.$emit("stop-sounds"),"undefined"!=typeof this.sounds[t]&&(e?this.sounds[t].sound.stop():this.sounds[t].sound.play()),this.$forceUpdate()},isPlaying:function(t){return"undefined"!=typeof this.sounds[t]&&this.sounds[t].sound.playing()},onStopSound:function(){if("undefined"!=typeof this.sounds&&this.sounds)for(var t=0;t<this.sounds.length;t++)"undefined"!=typeof this.sounds[t].sound&&this.sounds[t].sound.stop();this.$forceUpdate()},getDetailProp:function(t){return this.data&&"undefined"!=typeof this.data.detailImage&&"undefined"!=typeof this.data.detailImage[t]?this.data.detailImage[t]:""},onCarouselSlideStart:function(t,e){t==this.$vnode.key&&Velocity(this.$el,{blur:10},{duration:100}),e==this.$vnode.key&&(Velocity(this.$el,{blur:10},0),Velocity(this.$el,{blur:0},{duration:700}))},calculateAngle:function(t){var e=f(Math.atan(512/3e3));return 2*e*t}},mounted:function(){this.$parent.$on("carousel-slide-start",this.onCarouselSlideStart),this.$parent.$on("stop-sounds",this.onStopSound),Velocity(this.$el,{rotateY:this.calculateAngle(this.$vnode.key)},0)}},S=x,C=(i("eee8"),Object(v["a"])(S,P,V,!1,null,"05e52235",null)),E=C.exports,_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.polygonPoints?i("polygon",{staticClass:"polygon-division-reg",attrs:{points:t.polygonPoints},on:{mousedown:t.onGrab,mouseup:t.onRelease,touchstart:t.onGrab,touchend:t.onRelease}}):t._e()},L=[],B={props:["sector"],data:function(){return{data:this.sector}},computed:{polygonPoints:function(){return!(!this.data||"undefined"==typeof this.data["clipPolygon"])&&this.data["clipPolygon"]}},methods:{onGrab:function(){this.$parent.$emit("division-grab",this.$vnode.key)},onRelease(){this.$parent.$emit("division-release",this.$vnode.key)}}},M=B,U=(i("d3aa"),Object(v["a"])(M,_,L,!1,null,"a90e27ec",null)),O=U.exports,z={name:"app",data:function(){return{view:null,language:"lv",selectedDetail:null,mouseState:[0,0,0,0,0,0,0,0,0],mouseDownCount:0,rotationStep:0,currentShakeIndex:0,passiveMode:!1,userInputTimer:null,config:{userInputTimeout:5e3,detailRotationDuration:650},hasDivisions:!1,selectedDivision:null}},components:{sector:y,clipregion:D,detail:E,divisionregion:O},computed:{divisions:function(){return!1},sectors:function(){return!(!this.view||"undefined"==typeof this.view.sectors)&&this.view.sectors},backgroundImageUrl:function(){return this.view&&"undefined"!=typeof this.view.mainBackground?this.view.mainBackground:""},shadowImageUrl:function(){return this.view&&"undefined"!=typeof this.view.mainShadow?this.view.mainShadow:""},detailBackgroundImageUrl:function(){return this.view&&"undefined"!=typeof this.view.detailBackground?this.view.detailBackground:""}},methods:{init:function(){var t=1,e=window.location.pathname.split("/");t=parseInt(e[1]),this.$http.get("/resources/view_"+t+"/config.json").then((function(t){this.view=t.body,this.initAudio()}),(function(){}))},selectDetailView:function(t){null!=this.selectedDetail&&(this.initDetailView(),this.$emit("move-out",t),Velocity(this.$refs.detailScreen,{opacity:1},{duration:1e3,display:"block"}),Velocity(this.$refs.shadowBackground,{opacity:0},{duration:300,delay:100}))},initDetailView:function(){Velocity(this.$refs.detailScreen,{opacity:0},{display:"none"}),this.rotateDetailView(this.selectedDetail,!0)},closeDetailView:function(){var t=this;Velocity(this.$refs.detailScreen,{opacity:0},{duration:600,display:"none",complete:function(){t.selectedDetail=null}}),this.$emit("stop-sounds"),this.$emit("move-in"),Velocity(t.$refs.shadowBackground,{opacity:1},{duration:500}),Velocity(this.$refs.mainBackground,{blur:0},{duration:1e3}),this.userInputActivation()},getNextDetailViewId:function(){return null!=this.selectedDetail&&"undefined"!=typeof this.sectors[this.selectedDetail+1]?this.selectedDetail+1:null},getPreviousDetailViewId:function(){return null!=this.selectedDetail&&this.selectedDetail>0&&"undefined"!=typeof this.sectors[this.selectedDetail-1]?this.selectedDetail-1:null},renderDetailView:function(t){if(null!=this.selectedDetail&&t==this.selectedDetail)return!0;var e=this.getNextDetailViewId();if(null!=e&&t==e)return!0;var i=this.getPreviousDetailViewId();return null!=i&&t==i},rotateDetailView:function(t,e=!1){var i=t*this.rotationStep,n=this,s=this.config.detailRotationDuration;e&&(s=0),Velocity(this.$refs.detailCarousel,"finish"),this.$emit("carousel-slide-start",this.selectedDetail,t),n.selectedDetail=t,Velocity(this.$refs.detailCarousel,{rotateY:-i},{duration:s,easing:"ease"})},moveNext:function(){this.$emit("stop-sounds");var t=this.getNextDetailViewId();null!=t&&this.rotateDetailView(t)},movePrev:function(){this.$emit("stop-sounds");var t=this.getPreviousDetailViewId();null!=t&&this.rotateDetailView(t)},switchLanguage:function(t){this.language=t},blurEffect:function(t){Velocity(this.$refs.mainBackground,"finish");var e=0;t&&(e=3),Velocity(this.$refs.mainBackground,{blur:e},{duration:1e3})},onSectorGrabEvent:function(t){"undefined"!=typeof t&&null==this.selectedDetail&&this.$emit("blur-effect-on",t)},onSectorReleaseEvent:function(t){"undefined"!=typeof t&&null==this.selectedDetail&&(this.selectedDetail=t,this.selectDetailView(t))},onSectorLeaveEvent:function(t){"undefined"!=typeof t&&null==this.selectedDetail&&this.$emit("blur-effect-off")},onBlurEffectOn:function(t){this.blurEffect(!0)},onBlurEffectOff:function(){this.blurEffect(!1)},onMouseDown:function(t){++this.mouseState[t.button],++this.mouseDownCount},onMouseUp:function(t){--this.mouseState[t.button],--this.mouseDownCount},getLanguage:function(){return this.language},setLanguage:function(t){this.language=t},startShakeNext:function(){this.passiveMode&&null==this.selectedDetail&&(this.currentShakeIndex=(this.currentShakeIndex+1)%this.sectors.length,this.$emit("shake",this.currentShakeIndex),setTimeout(this.startShakeNext,500))},userInputActivation:function(){this.passiveMode=!1,this.userInputTimer&&(clearTimeout(this.userInputTimer),this.userInputTimer=null);var t=this;this.userInputTimer=setTimeout((function(){null==this.selectedDetail&&(t.passiveMode=!0,t.startShakeNext())}),this.config.userInputTimeout)},initAudio:function(){var t=this;if(this.view&&"undefined"!=typeof this.view.sectors)for(var e=0;e<this.view.sectors.length;e++)if("undefined"!=typeof this.view.sectors[e].audio)for(var i=0;i<this.view.sectors[e].audio.length;i++){var n=this.view.sectors[e].audio[i].fileName;this.view.sectors[e].audio[i].sound=new Howl({src:[n],preload:!0,onload:function(){this.play(),this.stop()},onend:function(){t.$emit("stop-sounds")}})}},onMouseMove:function(t){this.userInputActivation()}},mounted:function(){this.init(),document.addEventListener("mousedown",this.onMouseDown),document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("touchmove",this.onMouseMove),this.$on("blur-effect-event",this.blurEffect),this.$on("blur-effect-on",this.onBlurEffectOn),this.$on("blur-effect-off",this.onBlurEffectOff),this.$on("sector-grab",this.onSectorGrabEvent),this.$on("sector-release",this.onSectorReleaseEvent),this.$on("sector-leave",this.onSectorLeaveEvent),this.initDetailView(),this.rotationStep=2*f(Math.atan(512/3e3)),this.userInputActivation()},beforeDestroy:function(){document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("click",this.onClick)}},A=z,T=(i("f3ee"),Object(v["a"])(A,o,a,!1,null,null,null)),N=T.exports;n["a"].use(s["a"]),new n["a"]({render:t=>t(N)}).$mount("#app")},"67e6":function(t,e,i){"use strict";var n=i("396b"),s=i.n(n);s.a},"921d":function(t,e,i){},d3aa:function(t,e,i){"use strict";var n=i("921d"),s=i.n(n);s.a},eee8:function(t,e,i){"use strict";var n=i("0cf1"),s=i.n(n);s.a},f3ee:function(t,e,i){"use strict";var n=i("3f22"),s=i.n(n);s.a}}]);
//# sourceMappingURL=chunk-common.12509acd.js.map